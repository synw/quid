(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07e30bb6"],{"25f0":function(e,t,r){"use strict";var n=r("6eeb"),a=r("825a"),s=r("d039"),o=r("ad6d"),i="toString",u=RegExp.prototype,c=u[i],l=s((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=i;(l||d)&&n(RegExp.prototype,i,(function(){var e=a(this),t=String(e.source),r=e.flags,n=String(void 0===r&&e instanceof RegExp&&!("flags"in u)?o.call(e):r);return"/"+t+"/"+n}),{unsafe:!0})},"4df4":function(e,t,r){"use strict";var n=r("0366"),a=r("7b0b"),s=r("9bdd"),o=r("e95a"),i=r("50c4"),u=r("8418"),c=r("35a1");e.exports=function(e){var t,r,l,d,f,m,p=a(e),v="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,b=void 0!==g,w=c(p),x=0;if(b&&(g=n(g,h>2?arguments[2]:void 0,2)),void 0==w||v==Array&&o(w))for(t=i(p.length),r=new v(t);t>x;x++)m=b?g(p[x],x):p[x],u(r,x,m);else for(d=w.call(p),f=d.next,r=new v;!(l=f.call(d)).done;x++)m=b?s(d,g,[l.value,x],!0):l.value,u(r,x,m);return r.length=x,r}},6062:function(e,t,r){"use strict";var n=r("6d61"),a=r("6566");e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},6566:function(e,t,r){"use strict";var n=r("9bf2").f,a=r("7c73"),s=r("e2cc"),o=r("0366"),i=r("19aa"),u=r("2266"),c=r("7dd0"),l=r("2626"),d=r("83ab"),f=r("f183").fastKey,m=r("69f3"),p=m.set,v=m.getterFor;e.exports={getConstructor:function(e,t,r,c){var l=e((function(e,n){i(e,l,t),p(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=n&&u(n,e[c],e,r)})),m=v(t),h=function(e,t,r){var n,a,s=m(e),o=g(e,t);return o?o.value=r:(s.last=o={index:a=f(t,!0),key:t,value:r,previous:n=s.last,next:void 0,removed:!1},s.first||(s.first=o),n&&(n.next=o),d?s.size++:e.size++,"F"!==a&&(s.index[a]=o)),e},g=function(e,t){var r,n=m(e),a=f(t);if("F"!==a)return n.index[a];for(r=n.first;r;r=r.next)if(r.key==t)return r};return s(l.prototype,{clear:function(){var e=this,t=m(e),r=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete r[n.index],n=n.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,r=m(t),n=g(t,e);if(n){var a=n.next,s=n.previous;delete r.index[n.index],n.removed=!0,s&&(s.next=a),a&&(a.previous=s),r.first==n&&(r.first=a),r.last==n&&(r.last=s),d?r.size--:t.size--}return!!n},forEach:function(e){var t,r=m(this),n=o(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:r.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!g(this,e)}}),s(l.prototype,r?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return h(this,0===e?0:e,t)}}:{add:function(e){return h(this,e=0===e?0:e,e)}}),d&&n(l.prototype,"size",{get:function(){return m(this).size}}),l},setStrong:function(e,t,r){var n=t+" Iterator",a=v(t),s=v(n);c(e,t,(function(e,t){p(this,{type:n,target:e,state:a(e),kind:t,last:void 0})}),(function(){var e=s(this),t=e.kind,r=e.last;while(r&&r.removed)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),l(t)}}},a630:function(e,t,r){var n=r("23e7"),a=r("4df4"),s=r("1c7e"),o=!s((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:o},{from:a})},ad6d:function(e,t,r){"use strict";var n=r("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},b0c0:function(e,t,r){var n=r("83ab"),a=r("9bf2").f,s=Function.prototype,o=s.toString,i=/^\s*function ([^ (]*)/,u="name";n&&!(u in s)&&a(s,u,{configurable:!0,get:function(){try{return o.call(this).match(i)[1]}catch(e){return""}}})},b758:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center mt-5",staticStyle:{color:"lightgrey"}},[r("b-icon",{staticClass:"h1",attrs:{icon:"three-dots",animation:"cylon"}})],1)},a=[],s=r("2877"),o={},i=Object(s["a"])(o,n,a,!1,null,null,null);t["a"]=i.exports},c586:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form-group",[r("b-form-input",{attrs:{debounce:"500",state:e.isValid,placeholder:"namespace"},on:{change:e.onChange,update:e.fetchNamespaces},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),r("div",{staticClass:"mt-2"},[e.state.isLoading?r("b-icon",{attrs:{icon:"three-dots",animation:"cylon"}}):e._e(),e._l(e.items,(function(t){return r("b-badge",{key:t.id,staticClass:"mr-2",attrs:{variant:"primary"},on:{click:function(r){return e.select(t)}}},[e._v(e._s(t.name))])}))],2)],1)},a=[],s=(r("b0c0"),r("96cf"),r("1da1")),o={data:function(){return{value:"",items:[],selected:null,state:{isLoading:!1,isFormValid:!1}}},methods:{fetchNamespaces:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.state.isFormValid=!1,e.$emit("unvalidate"),""!==e.value){t.next=5;break}return e.items=[],t.abrupt("return");case 5:return e.state.isLoading=!0,t.next=8,e.$api.post("/admin/namespaces/find",{name:e.value});case 8:r=t.sent,n=r.response,a=r.error,e.state.isLoading=!1,null===a&&(e.items=n.data);case 13:case"end":return t.stop()}}),t)})))()},select:function(e){this.value=e.name,this.selected=e,this.state.isFormValid=!0,this.$emit("validate",this.selected),this.items=[]},onChange:function(){this.selected=null,this.$emit("unvalidate")}},computed:{isValid:function(){return""===this.value?null:null!==this.selected&&this.state.isFormValid}}},i=o,u=r("2877"),c=Object(u["a"])(i,n,a,!1,null,null,null);t["a"]=c.exports},e88f:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"text-muted mt-3"},[e._v(" Users "),"addUser"!==e.action?r("b-icon-plus",{staticClass:"mr-1",staticStyle:{color:"lightgrey"},on:{click:function(t){return e.$store.commit("action","addUser")}}}):e._e()],1),e.state.isLoading?r("loading-indicator"):e._e(),r("div",[r("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-4"},model:{value:e.showActionBar,callback:function(t){e.showActionBar=t},expression:"showActionBar"}},["addUser"===e.action?r("users-add",{on:{refresh:e.refresh}}):e._e()],1)],1),r("b-table",{staticClass:"mt-4",staticStyle:{"max-width":"650px"},attrs:{hover:"",bordeless:"",items:e.data,fields:e.fields},scopedSlots:e._u([{key:"cell(action)",fn:function(t){return[r("b-button",{staticClass:"mr-2",attrs:{variant:"outline-secondary"},on:{click:function(r){return e.toggleDetails(t)}}},[e._v(e._s(t.detailsShowing?"Hide":"Show")+" groups")]),t.item.username!==e.username?r("b-button",{attrs:{variant:"outline-danger"},on:{click:function(r){return e.confirmDeleteItem(t.item.id,t.item.username)}}},[e._v("Delete")]):e._e()]}},{key:"row-details",fn:function(t){return[void 0!==e.users[t.index]?r("b-card",[r("users-manage-groups",{attrs:{user:e.users[t.index]},on:{"user-added-in-group":function(r){return e.userAddedToGroup(t,r)}}})],1):e._e()]}}])}),r("b-modal",{ref:"delete-modal",attrs:{title:"Delete user"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){t.ok;var n=t.cancel;return[r("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.deleteItem(e.itemToDelete)}}},[e._v("Delete")]),r("b-button",{attrs:{variant:"warning"},on:{click:function(e){return n()}}},[e._v("Cancel")])]}}])},[e._v(" Delete "+e._s(e.itemToDelete.username)+"? ")])],1)},a=[],s=(r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("5530")),o=(r("96cf"),r("1da1")),i=r("2f62"),u=r("b758"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"28rem"},attrs:{title:"Add user"}},[r("b-card-text",[r("namespace-select",{on:{validate:e.validateNamespace,unvalidate:e.unvalidateNamespace}}),r("b-form-group",[r("b-form-input",{attrs:{state:e.isValidName,placeholder:"name"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),r("b-form-group",[r("b-form-input",{attrs:{state:e.isValidPassword,type:"password",placeholder:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e.isValidForm?r("b-button",{attrs:{variant:"success"},on:{click:e.postForm}},[e._v("Save")]):r("b-button",{attrs:{variant:"success",disabled:""}},[e._v("Save")]),r("b-button",{staticClass:"ml-2",attrs:{variant:"warning"},on:{click:function(t){return e.$store.commit("endAction")}}},[e._v("Cancel")])],1)],1)},l=[],d=(r("b0c0"),r("c586")),f={components:{NamespaceSelect:d["a"]},data:function(){return{form:{username:"",password:"",namespace:null},isNamespaceValid:!1}},methods:{unvalidateNamespace:function(){this.isNamespaceValid=!1},validateNamespace:function(e){this.form.namespace=e,this.isNamespaceValid=!0},postForm:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.post("/admin/users/add",{name:e.form.username,password:e.form.password,namespace_id:e.form.namespace.id});case 2:r=t.sent,n=r.error,null==n?(e.form.name="",e.form.password="",e.form.namespace=null,e.$emit("refresh"),e.$store.commit("endAction")):409===n.reponse.status&&(e.form.name="",e.form.password="",e.form.namespace=null);case 5:case"end":return t.stop()}}),t)})))()}},computed:{isValidForm:function(){return this.isValidName&&this.isValidPassword&&this.isNamespaceValid},isValidName:function(){return 0===this.form.username.length?null:this.form.username.length>=3},isValidPassword:function(){return 0===this.form.password.length?null:this.form.password.length>=7}}},m=f,p=r("2877"),v=Object(p["a"])(m,c,l,!1,null,null,null),h=v.exports,g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-row",{staticClass:"mb-2"},[r("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[r("b",[e._v("Groups")])]),e.user.groups.size>0?r("b-col",e._l(e.user.groups,(function(t){return r("b-badge",{key:t.id,staticClass:"mr-2",attrs:{variant:"primary"}},[e._v(" "+e._s(t.name)+" "),r("b-icon",{staticClass:"ml-1",attrs:{icon:"x-circle-fill"},on:{click:function(r){return e.confirmRemoveUserFromGroup(t)}}})],1)})),1):r("b-col",{staticClass:"text-superlight"},[e._v("the user has no groups")])],1),e.addingToGroup?r("div",{on:{click:function(t){e.addingToGroup=!1}}},[r("users-add-to-group",{attrs:{user:e.user},on:{"add-user-to-group":function(t){return e.addUserToGroup(t)}}})],1):r("b-button",{staticClass:"float-right",attrs:{variant:"link",size:"sm"},on:{click:function(t){e.addingToGroup=!0}}},[r("b-icon-plus",{staticClass:"mr-1"}),e._v(" Add user to group ")],1),r("b-modal",{ref:"remove-from-group-modal",attrs:{title:"Remove user from group"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){t.ok;var n=t.cancel;return[r("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.removeUserFromGroup(e.groupToRemove)}}},[e._v("Remove")]),r("b-button",{attrs:{variant:"warning"},on:{click:function(e){return n()}}},[e._v("Cancel")])]}}])},[null!==e.groupToRemove?r("span",[e._v("Remove user from group "+e._s(e.groupToRemove.name)+"?")]):e._e()])],1)},b=[],w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-form-group",{staticClass:"mt-4"},[r("h4",{staticClass:"text-muted"},[e._v("Add user to group")]),r("div",{staticClass:"mt-2"},[e.state.isLoading?r("b-icon",{attrs:{icon:"three-dots",animation:"cylon"}}):e._e(),e.newGroups.size>0?r("div",e._l(e.newGroups,(function(t){return r("b-badge",{key:t.id,staticClass:"mr-2",attrs:{variant:"success",role:"button"},on:{click:function(r){return e.addUserToGroup(t)}}},[e._v(e._s(t.name))])})),1):r("p",{staticClass:"text-superlight"},[e._v("No groups found")])],1),r("div",{staticClass:"mt-4"},[r("b-button",{attrs:{variant:"warning"}},[e._v("Cancel")])],1)])},x=[];r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("fb6a"),r("25f0");function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t){if(e){if("string"===typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}function _(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=k(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,s=e},f:function(){try{o||null==r["return"]||r["return"]()}finally{if(i)throw s}}}}var R={data:function(){return{selected:null,state:{isLoading:!1},newGroups:new Set([])}},props:{user:{type:Object,required:!0}},methods:{addUserToGroup:function(e){this.$emit("add-user-to-group",e)},fetchData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a,s,o,i,u,c,l,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.state.isLoading=!0,t.next=3,e.$api.post("/admin/namespaces/groups",{namespace:e.user.namespace});case 3:if(r=t.sent,n=r.response,a=r.error,e.state.isLoading=!1,null!==a){t.next=45;break}s=new Set([]),o=_(n.data.groups),t.prev=10,o.s();case 12:if((i=o.n()).done){t.next=36;break}u=i.value,c=!1,l=_(e.user.groups),t.prev=16,l.s();case 18:if((d=l.n()).done){t.next=25;break}if(f=d.value,f.name!==u.name){t.next=23;break}return c=!0,t.abrupt("break",25);case 23:t.next=18;break;case 25:t.next=30;break;case 27:t.prev=27,t.t0=t["catch"](16),l.e(t.t0);case 30:return t.prev=30,l.f(),t.finish(30);case 33:c||s.add(u);case 34:t.next=12;break;case 36:t.next=41;break;case 38:t.prev=38,t.t1=t["catch"](10),o.e(t.t1);case 41:return t.prev=41,o.f(),t.finish(41);case 44:e.newGroups=s;case 45:case"end":return t.stop()}}),t,null,[[10,38,41,44],[16,27,30,33]])})))()}},mounted:function(){this.fetchData()}},C=R,$=Object(p["a"])(C,w,x,!1,null,null,null),S=$.exports,T={components:{UsersAddToGroup:S},data:function(){return{addingToGroup:!1,groupToRemove:null}},props:{user:{type:Object,required:!0}},methods:{removeUserFromGroup:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$refs["remove-from-group-modal"].hide(),t.addingToGroup&&(t.addingToGroup=!1),r.next=4,t.$api.post("/admin/groups/remove_user",{user_id:t.user.id,group_id:t.groupToRemove.id});case 4:n=r.sent,a=n.error,null===a&&(t.user.groups.delete(e),t.$bvToast.toast("Ok",{title:"User removed from group",variant:"success",autoHideDelay:1500})),t.groupToRemove=null;case 8:case"end":return r.stop()}}),r)})))()},confirmRemoveUserFromGroup:function(e){this.groupToRemove=e,this.$refs["remove-from-group-modal"].show()},addUserToGroup:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.addingToGroup=!1,r.next=3,t.$api.post("/admin/groups/add_user",{user_id:t.user.id,group_id:e.id});case 3:n=r.sent,a=n.error,null===a&&(t.user.groups.add(e),t.$emit("user-added-in-group",e),t.$bvToast.toast("Ok",{title:"User added in group",variant:"success",autoHideDelay:1500}));case 6:case"end":return r.stop()}}),r)})))()}}},A=T,O=Object(p["a"])(A,g,b,!1,null,null,null),j=O.exports,U={components:{LoadingIndicator:u["a"],UsersAdd:h,UsersManageGroups:j},data:function(){return{data:[],state:{isLoading:!1},fields:[{key:"id",sortable:!0},{key:"username",sortable:!0},{key:"namespace",sortable:!0},{key:"action",sortable:!1}],itemToDelete:{},users:{}}},methods:{userAddedToGroup:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r.users[e.index].groups.add(t),e.toggleDetails(),n.next=4,new Promise((function(e){return setTimeout(e,10)}));case 4:e.toggleDetails();case 5:case"end":return n.stop()}}),n)})))()},fetchUserDetails:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$api.post("/admin/users/info",{id:e.item.id});case 2:n=r.sent,a=n.response,s=e.item,s.index=e.index,s.groups=new Set(a.data.groups),t.users[e.index]=s;case 8:case"end":return r.stop()}}),r)})))()},toggleDetails:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.detailsShowing){r.next=3;break}return r.next=3,t.fetchUserDetails(e);case 3:e.toggleDetails();case 4:case"end":return r.stop()}}),r)})))()},refresh:function(){this.fetchUsers(),this.$bvToast.toast("ok",{title:"User saved",variant:"success",autoHideDelay:1500})},fetchUsers:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.get("/admin/users/all");case 2:r=t.sent,n=r.response,a=r.error,a||(e.data=n.data);case 6:case"end":return t.stop()}}),t)})))()},confirmDeleteItem:function(e,t){this.itemToDelete={username:t,id:e},this.$refs["delete-modal"].show()},deleteItem:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$refs["delete-modal"].hide(),r.next=3,t.$api.post("/admin/users/delete",{id:e.id});case 3:n=r.sent,a=n.error,null===a&&(t.$bvToast.toast("Ok",{title:"User deleted",autoHideDelay:1e3,variant:"success"}),t.fetchUsers());case 6:case"end":return r.stop()}}),r)})))()}},mounted:function(){this.fetchUsers()},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(i["c"])(["action","username"])),Object(i["b"])({s:"showActionBar"})),{},{showActionBar:{get:function(){return this.s},set:function(e){return e}}})},G=U,D=Object(p["a"])(G,n,a,!1,null,null,null);t["default"]=D.exports},fb6a:function(e,t,r){"use strict";var n=r("23e7"),a=r("861d"),s=r("e8b5"),o=r("23cb"),i=r("50c4"),u=r("fc6a"),c=r("8418"),l=r("b622"),d=r("1dde"),f=r("ae40"),m=d("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),h=[].slice,g=Math.max;n({target:"Array",proto:!0,forced:!m||!p},{slice:function(e,t){var r,n,l,d=u(this),f=i(d.length),m=o(e,f),p=o(void 0===t?f:t,f);if(s(d)&&(r=d.constructor,"function"!=typeof r||r!==Array&&!s(r.prototype)?a(r)&&(r=r[v],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return h.call(d,m,p);for(n=new(void 0===r?Array:r)(g(p-m,0)),l=0;m<p;m++,l++)m in d&&c(n,l,d[m]);return n.length=l,n}})}}]);
//# sourceMappingURL=chunk-07e30bb6.26568ade.js.map