(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-243353fe"],{"1a6b":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticClass:"text-muted mt-3"},[e._v(" Namespaces "),"addNamespace"!==e.action?n("b-icon-plus",{staticClass:"mr-1",staticStyle:{color:"lightgrey"},on:{click:function(t){return e.$store.commit("action","addNamespace")}}}):e._e()],1),n("div",[n("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-4"},model:{value:e.showActionBar,callback:function(t){e.showActionBar=t},expression:"showActionBar"}},["addNamespace"===e.action?n("namespace-add",{on:{refresh:e.refresh}}):e._e()],1)],1),n("b-table",{staticClass:"mt-4",staticStyle:{"max-width":"950px"},attrs:{hover:"",bordeless:"",items:e.data,fields:e.fields},scopedSlots:e._u([{key:"cell(public_endpoint_enabled)",fn:function(t){return["quid"!==t.item.name?n("b-form-group",{staticClass:"text-center"},[n("b-form-checkbox",{attrs:{switch:""},on:{change:function(n){return e.toggleEndpoint(t)}},model:{value:t.item.public_endpoint_enabled,callback:function(n){e.$set(t.item,"public_endpoint_enabled",n)},expression:"row.item.public_endpoint_enabled"}})],1):e._e()]}},{key:"cell(max_token_ttl)",fn:function(t){return["quid"!==t.item.name?n("b-icon-stopwatch",{staticClass:"mr-1 text-superlight",on:{click:function(n){return e.toggleEditTtl(t.item.id)}}}):n("b-icon-stopwatch",{staticStyle:{color:"transparent"}}),e._v(" "),e.editTtl!==t.item.id?n("span",[e._v(e._s(t.item.max_token_ttl))]):n("namespace-edit-max-ttl",{attrs:{namespaceId:t.item.id,value:t.item.max_token_ttl},on:{"end-edit":function(n){return e.undeditTtl(t,n)}}})]}},{key:"cell(max_refresh_token_ttl)",fn:function(t){return["quid"!==t.item.name?n("b-icon-stopwatch",{staticClass:"mr-1 text-superlight",on:{click:function(n){return e.toggleEditRefreshTtl(t.item.id)}}}):n("b-icon-stopwatch",{staticStyle:{color:"transparent"}}),e._v(" "),e.editRefreshTtl!==t.item.id||"quid"==t.item.name?n("span",[e._v(e._s(t.item.max_refresh_token_ttl))]):n("namespace-edit-max-refresh-ttl",{attrs:{namespaceId:t.item.id,value:t.item.max_refresh_token_ttl},on:{"end-edit":function(n){return e.undeditRefreshTtl(t,n)}}})]}},{key:"cell(action)",fn:function(t){return[n("b-button",{staticClass:"mr-2",attrs:{variant:"outline-secondary"},on:{click:function(n){return e.toggleDetails(t)}}},[e._v(e._s(t.detailsShowing?"Hide":"Show")+" info")]),"quid"!==t.item.name?n("b-button",{staticClass:"mr-2",attrs:{variant:"outline-secondary"},on:{click:function(n){return e.showKey(t.item.id,t.item.name)}}},[e._v("Show key")]):e._e(),"quid"!==t.item.name?n("b-button",{attrs:{variant:"outline-danger"},on:{click:function(n){return e.confirmDeleteNamespace(t.item.id,t.item.name)}}},[e._v("Delete")]):e._e()]}},{key:"row-details",fn:function(t){return[void 0!=e.rowDetails[t.index]?n("namespace-info",{attrs:{details:e.rowDetails[t.index]}}):e._e()]}}])}),n("b-modal",{ref:"delete-modal",attrs:{title:"Delete namespace"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){t.ok;var a=t.cancel;return[n("b-button",{attrs:{variant:"danger"},on:{click:function(t){return e.deleteNamespace(e.namespaceToDelete)}}},[e._v("Delete")]),n("b-button",{attrs:{variant:"warning"},on:{click:function(e){return a()}}},[e._v("Cancel")])]}}])},[e._v(" Delete "+e._s(e.namespaceToDelete.name)+"? ")]),n("b-modal",{ref:"nskey-modal",attrs:{title:"Key for namespace ".concat(e.selectedNs.title)},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var a=t.cancel;return[n("b-button",{attrs:{variant:"warning"},on:{click:function(e){return a()}}},[e._v("Ok")])]}}])},[e._v(" "+e._s(e.selectedNs.key)+" ")])],1)},r=[],i=n("5530"),s=(n("96cf"),n("1da1")),o=n("2f62"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form",[n("b-card",{staticClass:"mb-2",staticStyle:{"max-width":"28rem"},attrs:{title:"Add a namespace"}},[n("b-card-text",[n("b-form-group",[n("b-form-input",{attrs:{state:e.isValidName,placeholder:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),n("b-form-invalid-feedback",{attrs:{state:e.isValidName}},[e._v("The name must be at least 4 characters long")])],1),n("b-form-group",{attrs:{label:"Access tokens max time to live"}},[n("b-form-input",{attrs:{state:e.isNotEmpty},model:{value:e.form.maxTtl,callback:function(t){e.$set(e.form,"maxTtl",t)},expression:"form.maxTtl"}})],1),n("b-form-group",{attrs:{label:"Refresh tokens max time to live"}},[n("b-form-input",{attrs:{state:e.isNotEmpty},model:{value:e.form.refreshMaxTtl,callback:function(t){e.$set(e.form,"refreshMaxTtl",t)},expression:"form.refreshMaxTtl"}})],1),n("b-form-group",[n("b-form-checkbox",{attrs:{switch:""},model:{value:e.form.enableEndpoint,callback:function(t){e.$set(e.form,"enableEndpoint",t)},expression:"form.enableEndpoint"}},[e._v("Enable public enableEndpoint")])],1)],1),e.isValidForm?n("b-button",{attrs:{variant:"success"},on:{click:e.postForm}},[e._v("Save")]):n("b-button",{attrs:{variant:"success",disabled:""}},[e._v("Save")]),n("b-button",{staticClass:"ml-2",attrs:{variant:"warning"},on:{click:function(t){return e.$store.commit("endAction")}}},[e._v("Cancel")])],1)],1)},c=[],u=(n("b0c0"),{data:function(){return{form:{name:"",maxTtl:"20m",refreshMaxTtl:"24h",enableEndpoint:!1}}},methods:{postForm:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.post("/admin/namespaces/add",{name:e.form.name,max_ttl:e.form.maxTtl,refresh_max_ttl:e.form.refreshMaxTtl,enable_endpoint:e.form.enableEndpoint});case 2:n=t.sent,a=n.error,null==a&&(e.form.name="",e.form.maxTtl="20m",e.form.refreshMaxTtl="24h",e.form.enableEndpoint=!1,e.$emit("refresh"),e.$store.commit("endAction"));case 5:case"end":return t.stop()}}),t)})))()}},computed:{isValidForm:function(){return!(!this.isValidName||!this.isNotEmpty)},isValidName:function(){return 0===this.form.name.length?null:this.form.name.length>=4},isNotEmpty:function(){return 0!==this.form.maxTtl.length}}}),m=u,d=n("2877"),f=Object(d["a"])(m,l,c,!1,null,null,null),p=f.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",[n("b-row",{staticClass:"mb-2"},[n("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[n("b",[e._v("Users")])]),n("b-col",[e._v(e._s(e.details.num_users))])],1),n("b-row",{staticClass:"mb-2"},[n("b-col",{staticClass:"text-sm-right",attrs:{sm:"3"}},[n("b",[e._v("Groups")])]),n("b-col",e._l(e.details.groups,(function(t){return n("b-badge",{key:t.id,staticClass:"mr-2",attrs:{variant:"primary"}},[e._v(e._s(t.name))])})),1)],1)],1)},b=[],_={props:{details:{type:Object,default:function(){}}}},v=_,k=Object(d["a"])(v,h,b,!1,null,null,null),x=k.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form-input",{staticStyle:{display:"inline-block",width:"52px"},attrs:{value:e.value,size:"sm",autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"escape",void 0,t.key,void 0)?null:e.$emit("end-edit",null)}},model:{value:e.newValue,callback:function(t){e.newValue=t},expression:"newValue"}})},w=[],y=(n("a9e3"),{data:function(){return{newValue:this.value}},props:{namespaceId:{type:Number,required:!0},value:{type:String,required:!0}},methods:{submit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.post("/admin/namespaces/max-ttl",{id:e.namespaceId,max_ttl:e.newValue});case 2:n=t.sent,a=n.error,null==a&&e.$notify.done("Namespace max access token ttl set"),e.$emit("end-edit",e.value);case 6:case"end":return t.stop()}}),t)})))()}}}),N=y,T=Object(d["a"])(N,g,w,!1,null,null,null),E=T.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form-input",{staticStyle:{display:"inline-block",width:"52px"},attrs:{value:e.value,size:"sm",autofocus:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit(t)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"escape",void 0,t.key,void 0)?null:e.$emit("end-edit",null)}},model:{value:e.newValue,callback:function(t){e.newValue=t},expression:"newValue"}})},$=[],O={data:function(){return{newValue:this.value}},props:{namespaceId:{type:Number,required:!0},value:{type:String,required:!0}},methods:{submit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.post("/admin/namespaces/max-refresh-ttl",{id:e.namespaceId,refresh_max_ttl:e.newValue});case 2:n=t.sent,a=n.error,null==a&&e.$notify.done("Namespace max refresh token ttl set"),e.$emit("end-edit",e.value);case 6:case"end":return t.stop()}}),t)})))()}}},S=O,C=Object(d["a"])(S,R,$,!1,null,null,null),I=C.exports,A={components:{NamespaceAdd:p,NamespaceInfo:x,NamespaceEditMaxTtl:E,NamespaceEditMaxRefreshTtl:I},data:function(){return{data:[],fields:[{key:"id",sortable:!0},{key:"name",sortable:!0},{key:"public_endpoint_enabled",label:"Public endpoint",sortable:!1},{key:"max_token_ttl",label:"Access tokens ttl",sortable:!0},{key:"max_refresh_token_ttl",label:"Refresh tokens ttl",sortable:!0},{key:"action",label:"",sortable:!1}],namespaceToDelete:{},rowDetails:{},selectedNs:{title:""},isEditTtl:!1,editTtl:null,isEditRefreshTtl:!1,editRefreshTtl:null}},methods:{undeditRefreshTtl:function(e,t){this.isEditRefreshTtl=!1,this.editRefreshTtl=null,null!=t&&(this.data[e.index].max_refresh_token_ttl=t)},toggleEditRefreshTtl:function(e){this.isEditRefreshTtl?(this.editRefreshTtl=null,this.isEditRefreshTtl=!1):(this.editRefreshTtl=e,this.isEditRefreshTtl=!0)},undeditTtl:function(e,t){this.isEditTtl=!1,this.editTtl=null,null!=t&&(this.data[e.index].max_token_ttl=t)},toggleEditTtl:function(e){this.isEditTtl?(this.editTtl=null,this.isEditTtl=!1):(this.editTtl=e,this.isEditTtl=!0)},toggleEndpoint:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=!e.item.public_endpoint_enabled,n.next=3,t.$api.post("/admin/namespaces/endpoint",{id:e.item.id,enable:a});case 3:r=n.sent,i=r.error,null===i&&(s=e.item.public_endpoint_enabled?"enabled":"disabled",t.$notify.done("Namespace endpoint ".concat(s)));case 6:case"end":return n.stop()}}),n)})))()},showKey:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n.selectedNs={id:e,title:t,key:null},a.next=3,n.$api.post("/admin/namespaces/key",{id:e});case 3:r=a.sent,i=r.response,s=r.error,s||(n.selectedNs.key=i.data.key,n.$refs["nskey-modal"].show());case 7:case"end":return a.stop()}}),a)})))()},toggleDetails:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.detailsShowing){n.next=6;break}return n.next=3,t.$api.post("/admin/namespaces/info",{id:e.item.id});case 3:a=n.sent,r=a.response,t.rowDetails[e.index]=r.data;case 6:e.toggleDetails();case 7:case"end":return n.stop()}}),n)})))()},refresh:function(){this.fetchNamespaces(),this.$notify.done("Namespace saved")},fetchNamespaces:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.get("/admin/namespaces/all");case 2:n=t.sent,a=n.response,e.data=a.data;case 5:case"end":return t.stop()}}),t)})))()},deleteNamespace:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.$refs["delete-modal"].hide(),n.next=3,t.$api.post("/admin/namespaces/delete",{id:e.id});case 3:a=n.sent,r=a.error,null===r&&(t.$notify.done("Namespace deleted"),t.fetchNamespaces());case 6:case"end":return n.stop()}}),n)})))()},getRowDetails:function(e){return e.detailsShowing||void 0===this.rowDetails[e.index]?{num_users:0,groups:[]}:this.rowDetails[e.index]},confirmDeleteNamespace:function(e,t){this.namespaceToDelete={name:t,id:e},this.$refs["delete-modal"].show()},nsKeyModalTitle:function(){if(null!==this.selectedNs)return"Key for namespace ".concat(this.selectedNs.title)}},mounted:function(){this.fetchNamespaces()},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(o["c"])(["action"])),Object(o["b"])({s:"showActionBar"})),{},{showActionBar:{get:function(){return this.s},set:function(e){return e}}})},D=A,V=Object(d["a"])(D,a,r,!1,null,null,null);t["default"]=V.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var a=n("1d80"),r=n("5899"),i="["+r+"]",s=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),l=function(e){return function(t){var n=String(a(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:l(1),end:l(2),trim:l(3)}},a9e3:function(e,t,n){"use strict";var a=n("83ab"),r=n("da84"),i=n("94ca"),s=n("6eeb"),o=n("5135"),l=n("c6b6"),c=n("7156"),u=n("c04e"),m=n("d039"),d=n("7c73"),f=n("241c").f,p=n("06cf").f,h=n("9bf2").f,b=n("58a8").trim,_="Number",v=r[_],k=v.prototype,x=l(d(k))==_,g=function(e){var t,n,a,r,i,s,o,l,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=b(c),t=c.charCodeAt(0),43===t||45===t){if(n=c.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+c}for(i=c.slice(2),s=i.length,o=0;o<s;o++)if(l=i.charCodeAt(o),l<48||l>r)return NaN;return parseInt(i,a)}return+c};if(i(_,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var w,y=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof y&&(x?m((function(){k.valueOf.call(n)})):l(n)!=_)?c(new v(g(t)),n,y):g(t)},N=a?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),T=0;N.length>T;T++)o(v,w=N[T])&&!o(y,w)&&h(y,w,p(v,w));y.prototype=k,k.constructor=y,s(r,_,y)}},b0c0:function(e,t,n){var a=n("83ab"),r=n("9bf2").f,i=Function.prototype,s=i.toString,o=/^\s*function ([^ (]*)/,l="name";a&&!(l in i)&&r(i,l,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-243353fe.3c064ec9.js.map